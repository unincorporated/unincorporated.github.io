/*  TODO: body margin with header and footer
    @version 1.0.0
    @author [Prawesh Kumar] */
document.getElementsByClassName("page-wrapper")[0].style = "padding-top:" + document.getElementsByTagName("header")[0].offsetHeight + "px;margin-bottom:" + document.getElementsByTagName("footer")[0].offsetHeight + "px";

$(document).ready(function() { 
        
    /*  TODO: SLICK SLIDER for categories after header
    @version 1.0.0
    @author [Prawesh Kumar] */
    $('.categories-product-carousel').slick({
        dots: false,
        arrows: true,
        prevArrow:"<span class='sprite-icon icon-arrow-left w-40p'></span>",
        nextArrow:"<span class='sprite-icon icon-arrow-right w-40p'></span>",
        infinite:true, 
        variableWidth: true,
        autoplay: false,
        autoplaySpeed: 2000,
        slidesToScroll: 7,
        slidesToShow: 7,
        responsive: [
        {
            breakpoint: 1024,
            settings: {
                slidesToScroll: 6,
                slidesToShow: 6
            }
        },
        {
            breakpoint: 992,
            settings: {
                slidesToScroll: 5,
                slidesToShow: 5
            }
        },
        {
            breakpoint: 768,
            settings: {
                slidesToScroll: 4,
                slidesToShow: 4
            }
        },
        {
            breakpoint: 576,
            settings: {
                slidesToScroll: 3,
                slidesToShow: 3
            }
        },
        {
            breakpoint: 350,
            settings: {
                slidesToScroll: 2,
                slidesToShow: 2
            }
        },
        {
            breakpoint: 300,
            settings: {
                slidesToScroll: 1,
                slidesToShow: 1
            }
        }
        ]
    });

    /*  TODO: SLICK SLIDER for product-items-carousel
    @version 1.0.0
    @author [Prawesh Kumar] */
    $('.product-items-carousel').slick({
        dots: false,
        arrows: true,
        prevArrow:"<span class='sprite-icon icon-arrow-left w-40p'></span>",
        nextArrow:"<span class='sprite-icon icon-arrow-right w-40p'></span>",
        slidesToShow: 4,
        infinite: true,
        slidesToScroll: 1, 
        autoplay: true,
        autoplaySpeed: 2000,
        responsive: [
        {
            breakpoint: 1024,
            settings: {
                slidesToShow: 4
            }
        },
        {
            breakpoint: 992,
            settings: {
                slidesToShow: 3
            }
        },
        {
            breakpoint: 768,
            settings: {
                slidesToShow: 2
            }
        },
        {
            breakpoint: 576,
            settings: {
                slidesToShow: 2
            }
        },
        {
            breakpoint: 350,
            settings: {
                slidesToShow: 1
            }
        },
        {
            breakpoint: 300,
            settings: {
                slidesToShow: 1
            }
        }
        ]
    });


    /*  TODO: fixed header top on scroll down
    @version 1.0.0
    @author [Prawesh Kumar] */
    $(window).on("scroll", function () {
    var lastScrollTop = '';
    function stickyMenu() {
        var st = $(window).scrollTop();  
        var mainMenuBottom = $('#top-header');
        if ($(window).scrollTop() > 10) {
            if (st > lastScrollTop) {
                //to hide sticky menu on scroll down addClass replace to removeclass
                mainMenuBottom.addClass("sticky-start");
            } else {
                // active sticky menu on scroll up
                mainMenuBottom.removeClass("sticky-start");
            }

        }else {
            mainMenuBottom.removeClass("sticky-start");
        }
        if ($(window).scrollTop() > 100) {
            if (st > lastScrollTop) {
                //to hide sticky menu on scroll down addClass replace to removeclass
                mainMenuBottom.addClass("shadow sticky-on");
                // $('#scroll-to-top').removeClass("hide");
            } else {
                // active sticky menu on scroll up
                mainMenuBottom.removeClass("shadow sticky-on");
                // $('#scroll-to-top').addClass("hide");
            }

        } else {
            mainMenuBottom.removeClass("shadow sticky-on");
            // $('#scroll-to-top').addClass("hide");
        }

        lastScrollTop = st;
    }
    stickyMenu();

    });   



    /*  TODO: toggle btn for LOgin with OTP
    @version 1.0.0
    @author [Prawesh Kumar] */
    $('.remove-active').on('click', function () {
        $(this).removeClass("active");
        setTimeout(function(){$(".remove-active").removeClass("active");}, 1000)
    });

   

    /*  TODO: user dropdown in header to toggle tabs
    @version 1.0.0
    @author [Prawesh Kumar] */
    $('#my-account-dropdown a').on('click', function (e) {
        e.preventDefault()
        $("#my-account-dropdown a").removeClass("active");
        $($(this)).tab("show");
        $($(this).attr("href") + "-tab").tab('show');
    })

    $('.login-signup-tab-open').on('click', function (e) {
        alert($(this).attr("data-href"));
        // $($(this).attr("data-href") + "-tab").tab('show');
        $("#pills-tab .nav-link").removeClass('active');
        $("#pills-tabContent .tab-pane").removeClass('active');
        $("#pills-tabContent .tab-pane").removeClass('show');
        $($(this).attr("data-href") + "-tab").addClass('active');        
        $($(this).attr("data-href")).addClass('active');        
        $($(this).attr("data-href")).addClass('show');
    })

    /*  TODO: edit personal detail jequery
    @version 1.0.0
    @author [Prawesh Kumar] */
    $(function () {
        $('.edit-details').on('click',function(){
            var $qty=$(this).closest('.inputs').find('.form-control');
            $qty.prop("disabled", false);
            $(this).css("display", "none");
            $(this).closest(".inputs").find(".save-details").css("display", "block");
            $(this).closest(".inputs").find(".personal-details").removeClass("disabled");
        });
        $('.save-details').on('click',function(){
            var $qty=$(this).closest('.inputs').find('.form-control');
            $qty.prop("disabled", true);
            $(this).css("display", "none");
            $(this).closest(".inputs").find(".save-details").css("display", "none");
            $(this).closest(".inputs").find(".edit-details").css("display", "block");
        });
        var $qty=$('.inputs.disabled-true').find('.form-control');
        $qty.prop("disabled", true);
        $(this).css("display", "none");
        $(".disabled-true .save-details").css("display", "none");
        $(".disabled-true .edit-details").css("display", "block");
        $(".disabled-true .cancel").css("display", "none");
    });

    $(function () {
        $('.add-quantity').on('click',function(){
            var $qty=$(this).closest('.product-quantity').find('.quantity-number');
            var $unitqty=$(this).closest('.product-quantity').find('.unit-price');
            var currentVal = parseInt($qty.val());
            if (!isNaN(currentVal)) {
                $qty.val(currentVal + 1);
                ($(this).closest('.product-quantity').find('.per-unit-price')).text(parseInt($unitqty.text())*parseInt(currentVal + 1));
            }
        });
        $('.minus-quantity').on('click',function(){
            var $qty=$(this).closest('.product-quantity').find('.quantity-number');
            var $unitqty=$(this).closest('.product-quantity').find('.unit-price');
            var currentVal = parseInt($qty.val());
            if (!isNaN(currentVal) && currentVal > 1) {
                $qty.val(currentVal - 1);
                ($(this).closest('.product-quantity').find('.per-unit-price')).text(parseInt($unitqty.text())*parseInt(currentVal - 1));
            }
        });
        $('.quantity-number').on('keyup',function(){
            var $qty=$(this);
            var $unitqty=$(this).closest('.product-quantity').find('.unit-price');
            var currentVal = parseInt($qty.val());
            if(currentVal > 0){
                ($(this).closest('.product-quantity').find('.per-unit-price')).text(parseInt($unitqty.text())*parseInt(currentVal));
            } else{
                ($(this).closest('.product-quantity').find('.per-unit-price')).text("0");
            }
        });
    });

    $('.digit-group').find('input').each(function() {
        $(this).attr('maxlength', 1);
        $(this).on('keyup', function(e) {
            var parent = $($(this).parent());
		
            if(e.keyCode === 8 || e.keyCode === 37) {
                var prev = parent.find('input#' + $(this).data('previous'));
			
                if(prev.length) {
                    $(prev).select();
                }
            } else if((e.keyCode >= 48 && e.keyCode <= 57) || (e.keyCode >= 65 && e.keyCode <= 90) || (e.keyCode >= 96 && e.keyCode <= 105) || e.keyCode === 39) {
                var next = parent.find('input#' + $(this).data('next'));
			
                if(next.length) {
                    $(next).select();
                } else {
                    if(parent.data('autosubmit')) {
                        parent.submit();
                    }
                }
            }
        });
    });

}); 


